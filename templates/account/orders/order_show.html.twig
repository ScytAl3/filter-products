{% extends 'layouts/base.html.twig' %}

{% block title %} {{ 'title.accountpage.menu.order_detail' | trans ({}, 'navigation') ~ orderId }} | {{ parent() }}
{% endblock %}

{% block body %}

{# Titre de la page #}
<div class="text-center border-bottom border-warning pt-5">
    <h1 class="text-uppercase text-center">
        {{ 'my_account.orders.detail_page.title' | trans ({}, 'pagecontent') }}
        n°
        {{ orderId }}
    </h1>
    <p>
        {{ 'my_account.orders.detail_page.date' | trans ({}, 'pagecontent') }}
        <time datetime="{{ date|date('d-m-Y') }}">
            {{ date|date('d-m-Y') }}
        </time>
    </p>
</div>

{# Boutton retour order history #}
<div class="text-center mt-3">
    <a class="btn btn-info btn-sm"
       href="{{ path('app_account_order_history', {'_fragment': 'anchor-order-history'}) }}">
        <i class="fas fa-chevron-circle-left"></i>
        {{ 'my_account.orders.detail_page.action_link.back_to' | trans ({}, 'pagecontent') }}
    </a>
</div>

{# Block pour afficher la liste des produits associés à la commande #}
<div>
    {# Tableau des produits dans le panier #}
    <table class="table table-striped mt-3">
        {# Entête du tableau #}
        <thead class="thead-dark">
            <tr>
                <th>
                    {{ 'my_account.orders.detail_page.table_header.product' | trans ({}, 'pagecontent') }}
                </th>
                <th></th>
                <th class="text-center">
                    {{ 'my_account.orders.detail_page.table_header.quantity' | trans ({}, 'pagecontent') }}
                </th>
                <th class="text-right">Total</th>
            </tr>
        </thead>
        {# Corps du tableau: liste des produits #}
        <tbody>
            {# Import: purchased products template #}
            {% include 'account/orders/_purchasedProducts.html.twig' %}
        </tbody>
        {# Calcul du montant total du panier #}
        <tfoot class="text-right table-sm">
            {# Total HT des produits #}
            <tr class="font-weight-bold">
                <td colspan="3">Total products (excl. tax) :</td>
                <td>
                    {{ total_ht |format_currency('EUR', {fraction_digit: 2}) }}
                </td>
            </tr>
            {# Total de la TVA #}
            <tr class="font-weight-light">
                <td colspan="3">including vat :</td>
                <td>
                    {{ tva |format_currency('EUR', {fraction_digit: 2}) }}
                </td>
            </tr>
            {# Montant de la livraison #}
            <tr class="font-weight-light">
                <td colspan="3">Delivery :</td>
                <td>
                    <small class="text-success">
                        free of charge
                    </small>
                </td>
            </tr>
            {# Total TTC : tva + shipping #}
            <tr class="font-weight-bold">
                <td colspan="3">Total (incl. tax) :</td>
                <td>
                    {{ total_ttc |format_currency('EUR', {fraction_digit: 2}) }}
                </td>
            </tr>
        </tfoot>
    </table>

    <br>
    {# Adresses: livraison & facturation #}
    <div class="row">
        {{ dump(shipping_address) }}
    </div>

</div>

{% endblock %}